<!DOCTYPE html>
<html lang="ko" xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/css/mypage/cart.css" rel="stylesheet"></link>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <title>장바구니</title>
</head>
<body>
	<div th:replace="common/header.html"></div>
	<div th:replace="mypage/sideMenu.html"></div>
    <div class="outer">
        <div class="title">
            <span>장바구니(<span th:text="${#lists.size(cart_list)}"></span>)</span>
        </div>

        <form>
            <div class="cart">
                <div class="cart_list">
                    <ul class="cart_header">
                        <li class="allCheck"><input type="checkbox" id="allCheck" onclick="selectAll(this)"></li>
                        <li class="pname">상품명</li>
                        <li class="price">판매가</li>
                        <li class="amount">수량</li>
                        <li class="option">옵션</li>
                        <li class="cart_price">상품금액</li>
                        <li class="delete">삭제</li>
                    </ul>

					<div th:each="c: ${cart_list}">
					<div th:with="seller_code='${c.product_option.product.seller.applystore.seller_code}'"></div>
					[[${seller_code}]]
					<span th:text="${seller_code}"></span>
	                    <ul class="cart_ul">
	                    	<span class="seller" th:text="${c.product_option.product.seller.applystore.seller_name}"></span>
	                        <li class="check"><input type="checkbox" name="pcheck"></li>
	                        <li class="pname">
	                            <div class="img_area">
	                                <img th:src="@{${c.product_option.product.imageList[0].route} +${c.product_option.product.imageList[0].imgrName}}">
	                            </div>
	                            <div class="p_info">
	                                <div id="pname" th:text="${c.product_option.product.p_name}"></div>
	                            </div>
	                        </li>
	                        <li class="price" th:text="${c.product_option.product.p_price}"></li>
	                        <li class="amount">
	                            <button type="button" id="minus">-</button>
	                            <input type="number" class="numBox" min="1" th:value="${c.cart_amount}" readonly>
	                            <button type="button" id="plus">+</button>
	                        </li>
	                        <li class="option">
	                        	<div class="color" th:text="${c.product_option.p_color}"></div>
	                        	<div class="size" th:text="${c.product_option.p_size}"></div>
	                        </li>
	                        <li class="cart_price">30000원</li>
	                        <li class="delivery_price"></li>
	                        <li class="delete">
	                            <button type="button" id="delete">삭제</button>
	                        </li>
	                    </ul>
                    </div>
                </div>

                <div class="select">
                    <button type="button">선택주문</button>
                    <button type="button">선택삭제</button>
                </div>
            </div>
    
            <div class="result">
                <span>총 주문금액 : </span>
                <span id="sum"></span>
            </div>
            
            <div class="btn_area">
                <button type="submit" id="order_btn">주문하기</button>
            </div>
        </form>
    </div>
    <div th:replace="common/footer.html"></div>
    
        <!-- 체크박스 전체 선택 -->
    <script>
    	function selectAll(selectAll){
    		const checkboxes = document.getElementsByName('pcheck');
    		
    		checkboxes.forEach((checkbox) => {
    			checkbox.checked = selectAll.checked;
    		})
    	}
    </script> 
</body>
</html>