<!DOCTYPE html>
<html lang="ko" xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/css/mypage/point_coupon.css" rel="stylesheet"></link>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <title>적립금 / 쿠폰</title>
</head>
<body>
    <div th:replace="common/header.html"></div>
	<div th:replace="mypage/sideMenu.html"></div>
    <div class="outer">
        <div clss="title">
            <span id="title">적립금 / 쿠폰</span>
        </div>

        <div class="point_area">
            <div class="point_title">
                <div>적립금</div><div id="point" th:text="|${#aggregates.sum(point_list.![point])}원|"></div>
            </div>
            
            <div class="point_list">
                <ul class="point_header">
                    <li class="status">상태</li>
                    <li class="point">적립금</li>
                    <li class="info">적립 내용</li>
                    <li class="date">적용 일시</li>
                </ul>
			
                <ul class="point_content" th:each="p : ${point_list}">
                    <li class="status" th:if="${p.point_category.point_code} == 1 or ${p.point_category.point_code} == 2" th:text="적립" style="color: blue;"></li>
                    <li class="status" th:if="${p.point_category.point_code} == 3" th:text="차감" style="color: red;"></li>
                    <li class="point" th:text="${p.point}" th:if="${p.point_category.point_code} == 1 or ${p.point_category.point_code} == 2" style="color: blue;"></li>
                    <li class="point" th:text="${p.point}" th:if="${p.point_category.point_code} == 3" style="color: red;"></li>
                    <li class="info" th:text="${p.point_category.point_content}"></li>
                    <li class="date" th:text="${#dates.format(p.point_date, 'yyyy-MM-dd')}"></li>
                </ul>
            </div>
        </div>

        <div class="coupon_area">
            <div class="coupon_title">
                <div>쿠폰</div>
                <input type="radio" class="selectType" name="selectType" id="able" onclick="selectType(event)" value="able">
                <label for="able">사용가능/</label>
                <input type="radio" class="selectType" name="selectType" id="disable" onclick="selectType(event)" value="disable">
                <label for="disable">사용만료/</label>
                <input type="radio" class="selectType" name="selectType" id="use" onclick="selectType(event)" value="use">
                <label for="use">사용완료</label>
            </div>
            
            <div class="able_coupon_list">
                <ul class="coupon_header">
                    <li class="c_no">쿠폰번호</li>
                    <li class="c_name">쿠폰명</li>
                    <li class="c_info">쿠폰사용조건(금액)</li>
                    <li class="c_price">할인금액</li>
                    <li class="c_date">유효기간</li>
                </ul>

                <ul class="coupon_content" th:each="cou : ${cou_list}">
                    <li class="c_no" th:text="${cou.cou_no}"></li>
                    <li class="c_name" th:text="${cou.cou_name}"></li>
                    <li class="c_info" th:text="|${cou.cou_condition}원 이상 구매|"></li>
                    <li class="c_price" th:text="|${cou.cou_price}원|"></li>
                    <li class="c_date" th:text="${#dates.format(cou.expire_date, 'yyyy-MM-dd')}"></li>
                </ul>
            </div>

            <div class="disable_coupon_list" style="display: none;">
                <ul class="coupon_header">
                    <li class="c_no">쿠폰번호</li>
                    <li class="c_name">쿠폰명</li>
                    <li class="c_info">쿠폰사용조건(금액)</li>
                    <li class="c_price">할인금액</li>
                    <li class="c_date">유효기간</li>
                </ul>

                <ul class="coupon_content" th:each="disable : ${disable_cou_list}">
                    <li class="c_no" th:text="${disable.cou_no}"></li>
                    <li class="c_name" th:text="${disable.cou_name}"></li>
                    <li class="c_info" th:text="|${disable.cou_condition}원 이상 구매|"></li>
                    <li class="c_price" th:text="|${disable.cou_price}원|"></li>
                    <li class="c_date" th:text="${#dates.format(disable.expire_date, 'yyyy-MM-dd')}"></li>
                </ul>
            </div>

            <div class="use_coupon_list" style="display: none;">
                <ul class="coupon_header">
                    <li class="c_no">쿠폰번호</li>
                    <li class="c_name">쿠폰명</li>
                    <li class="c_info">쿠폰사용조건(금액)</li>
                    <li class="c_price">할인금액</li>
                    <li class="c_date">유효기간</li>
                </ul>

                <ul class="coupon_content" th:each="use : ${use_cou_list}">
                    <li class="c_no" th:text="${use.cou_no}"></li>
                    <li class="c_name" th:text="${use.cou_name}"></li>
                    <li class="c_info" th:text="|${use.cou_condition}원 이상 구매|"></li>
                    <li class="c_price" th:text="|${use.cou_price}원|"></li>
                    <li class="c_date" th:text="${#dates.format(use.expire_date, 'yyyy-MM-dd')}"></li>
                </ul>
            </div>
        </div>
    </div>
	<div th:replace="common/footer.html"></div>

    <script>
        function selectType(e)  {
            var type = e.target.value;
            
            console.log(e);
            if(type == 'able'){
                $('.able_coupon_list').show();
                $(".disable_coupon_list").hide();
                $(".use_coupon_list").hide();
            } else if(type == 'disable'){
                $('.able_coupon_list').hide();
                $(".disable_coupon_list").show();
                $(".use_coupon_list").hide();
            }  else {
                $('.able_coupon_list').hide();
                $(".disable_coupon_list").hide();
                $(".use_coupon_list").show();
            }
        }
    </script>
</body>
</html>