<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>clendy_Mainpage</title>
<style>
.ranking .productimg {
	list-style: none;
	width: 100%;
	box-sizing: border-box;
	padding: 0;
}

.productimg::after {
	content: '';
	clear: both;
	display: block;
}

.productimg li {
	float: left;
	margin: 40px 0;
	padding: 0 40px;
	width: 20%;
	box-sizing: border-box;
}

.productimg li .product_ranking {
	display: block;
	font-size: 16px;
	padding: 10px 0;
}

.productimg li .product_title {
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}

.productimg li img {
	width: 100%;
	height: 200px;
	vertical-align: middle;
}

.RVproduct .productimg {
	list-style: none;
}

.section input[id*="slide"] {
	display: none;
}

.section .slidewrap {
	max-width: 1200px;
	margin: 0 auto;
}

.section .slidelist {
	white-space: nowrap;
	font-size: 0;
	overflow: hidden;
	position: relative;
}

.section .slidelist>li {
	display: inline-block;
	vertical-align: middle;
	width: 100%;
	transition: all .5s;
}

.section .slidelist>li>a {
	display: block;
	position: relative;
}

.section .slidelist>li>a img {
	width: 100%;
}

.section .slidelist label {
	position: absolute;
	z-index: 10;
	top: 50%;
	transform: translateY(-50%);
	padding: 50px;
	cursor: pointer;
}

.section .slidelist .textbox {
	position: absolute;
	z-index: 1;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	line-height: 1.6;
	text-align: center;
}

.section .slidelist .textbox h3 {
	font-size: 36px;
	color: #fff;;
	transform: translateY(30px);
	transition: all .5s;
}

.section .slidelist .textbox p {
	font-size: 16px;
	color: #fff;
	opacity: 0;
	transform: translateY(30px);
	transition: all .5s;
}

/* input에 체크되면 슬라이드 효과 */
.section input[id="slide01"]:checked ~ .slidewrap .slidelist>li {
	transform: translateX(0%);
}

.section input[id="slide02"]:checked ~ .slidewrap .slidelist>li {
	transform: translateX(-100%);
}

.section input[id="slide03"]:checked ~ .slidewrap .slidelist>li {
	transform: translateX(-200%);
}

/* input에 체크되면 텍스트 효과 */
.section input[id="slide01"]:checked ~ .slidewrap li:nth-child(1) .textbox h3
	{
	opacity: 1;
	transform: translateY(0);
	transition-delay: .2s;
}

.section input[id="slide01"]:checked ~ .slidewrap li:nth-child(1) .textbox p
	{
	opacity: 1;
	transform: translateY(0);
	transition-delay: .4s;
}

.section input[id="slide02"]:checked ~ .slidewrap li:nth-child(2) .textbox h3
	{
	opacity: 1;
	transform: translateY(0);
	transition-delay: .2s;
}

.section input[id="slide02"]:checked ~ .slidewrap li:nth-child(2) .textbox p
	{
	opacity: 1;
	transform: translateY(0);
	transition-delay: .4s;
}

.section input[id="slide03"]:checked ~ .slidewrap li:nth-child(3) .textbox h3
	{
	opacity: 1;
	transform: translateY(0);
	transition-delay: .2s;
}

.section input[id="slide03"]:checked ~ .slidewrap li:nth-child(3) .textbox p
	{
	opacity: 1;
	transform: translateY(0);
	transition-delay: .4s;
}

/* 좌,우 슬라이드 버튼 */
.slide-control>div {
	display: none;
}

.section .left {
	left: 30px;
	background: url('/images/left.png') center center/100% no-repeat;
}

.section .right {
	right: 30px;
	background: url('/images/right.png') center center/100% no-repeat;
}

.section input[id="slide01"]:checked ~ .slidewrap .slide-control>div:nth-child(1)
	{
	display: block;
}

.section input[id="slide02"]:checked ~ .slidewrap .slide-control>div:nth-child(2)
	{
	display: block;
}

.section input[id="slide03"]:checked ~ .slidewrap .slide-control>div:nth-child(3)
	{
	display: block;
}

/* 페이징 */
.slide-pagelist {
	text-align: center;
	padding: 20px;
}

.slide-pagelist>li {
	display: inline-block;
	vertical-align: middle;
}

.slide-pagelist>li>label {
	display: block;
	padding: 8px 30px;
	border-radius: 30px;
	background: #ccc;
	margin: 20px 10px;
	cursor: pointer;
}

.section input[id="slide01"]:checked ~ .slidewrap .slide-pagelist>li:nth-child(1)>label
	{
	background: #999;
}

.section input[id="slide02"]:checked ~ .slidewrap .slide-pagelist>li:nth-child(2)>label
	{
	background: #999;
}

.section input[id="slide03"]:checked ~ .slidewrap .slide-pagelist>li:nth-child(3)>label
	{
	background: #999;
}

.wrapper1 {
	width: 100%;
}

.container {
	width: 1400px;
	margin: 0 auto;
	padding: 70px 0;
}







</style>
</head>

<body>
	<div th:replace="common/header.html"></div>
	<div class="wrapper1">

		<div class="searchdiv">
		<form class="searchProductForm" th:action="@{/searchProduct}" method="post">
			<input class="inputbar" type="search" name="keyword" placeholder="상품명,카테고리 검색">
			<span id="img-wrapper">
             	<img class="finding" onclick="searchForm();" src="/images/magnifying-glass-white.png" alt="finding">
            </span>
		</form>
		</div>
		
		
		
		<div class="container">
			<div class="section">
				<input type="radio" name="slide" id="slide01" checked> <input
					type="radio" name="slide" id="slide02"> <input type="radio"
					name="slide" id="slide03">
				<div class="slidewrap">

					<ul class="slidelist">
						<!-- 슬라이드 영역 -->
						<li class="slideitem"
							th:each="mainproduct, i : ${mainProductList}"><a
							th:href="@{'/product/view/' + ${mainproduct.pNo}}">
								<div class="textbox">
									<h3 th:text="${mainproduct.pName}"></h3>
									<p th:text="${mainproduct.pPrice}"></p>
								</div> <img th:src="@{/images/}+${mainproduct.imgName}">
						</a></li>


						<!-- 좌,우 슬라이드 버튼 -->
						<div class="slide-control">
							<div>
								<label for="slide03" class="left"></label> <label for="slide02"
									class="right"></label>
							</div>
							<div>
								<label for="slide01" class="left"></label> <label for="slide03"
									class="right"></label>
							</div>
							<div>
								<label for="slide02" class="left"></label> <label for="slide01"
									class="right"></label>
							</div>
						</div>

					</ul>
					<!-- 페이징 -->
					<ul class="slide-pagelist">
						<li><label for="slide01"></label></li>
						<li><label for="slide02"></label></li>
						<li><label for="slide03"></label></li>
					</ul>
				</div>


			</div>
			<hr>
			<div class="ranking">
				<h1>랭킹 top10</h1>
				<ul class="productimg">
					<li th:each="mainproduct, i : ${mainProductList}"><span
						class="product_ranking" th:text="|${i.count}위|"></span> <a
						th:href="@{'/product/view/' + ${mainproduct.pNo}}"><img
							th:src="@{/images/}+${mainproduct.imgName}"></a>
						<div class="product_txt">
							<p class="product_title" th:text="${mainproduct.pName}" />
							<p th:text="${mainproduct.pPrice}" />

						</div></li>
				</ul>
			</div>
			<hr>
			
			
			<div id="rightSide">
				<div id="right_zzim">
					<div class="recTit">
						<h1>최근본상품</h1>
						 <span id=recentCnt></span>
					</div>
					<ul></ul>
					<!-- 본 상품이 뿌려질 부분  -->
					<div id="paging">
						<a class="btn_prev" style="cursor: pointer">이전</a><span
							id="currentPage"></span><span id="totalPageCount"></span><a
							class="btn_next" style="cursor: pointer">다음</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div th:replace="common/footer.html"></div>

	<script>
		//
		// recent item    
		var Cpage; // 현재 페이지 
		var pagingSize = 4; // 원하는 페이지 사이즈로 조정하세용 
		function chkRecent(a) {
			var itemID = getCookie("itemID");
			$("#right_zzim ul").html(''); // 일단 Ul 내용 지우기... 
			if (itemID) {
				var totcount = itemID.split('&').length - 1; //
				var totpage = Math.ceil(totcount / pagingSize) * 1;

				Cpage = (totpage >= a) ? a : 1;

				Cpage = (Cpage < 1) ? totpage : Cpage;

				var start = (Cpage - 1) * pagingSize;

				for (i = start; i <= start + (pagingSize - 1); i++) {

					var thisItem = itemID.split('&')[i];

					if (thisItem) {
						var itemId = thisItem.split(':')[0];
						var itemImg = thisItem.split(':')[1];
						$("#right_zzim ul")
								.append(
										'<li><a href="/_detail.php?id='
												+ itemId
												+ '" target="_top"><img src="http://www.xxx.com/images/s'+itemImg+'"  width="75" border=1></a><div class="detail"><a href="javascript:removeRecentItem(\''
												+ thisItem
												+ '\')" class="btn_delete">삭제</a></div></li>')
					}
				}

				$("#paging").show();

			} else {

				$("#right_zzim ul").append(
						'<p class="noData">최근 본 상품이<br> 없습니다.</p>');

				$("#paging").hide();
				$("#recentCnt").text('');

			}
			updateRecentPage(totcount, Cpage);
		}

		chkRecent(1);

		function removeRecentItem(itemname) {

			var itemID = getCookie("itemID");

			itemID = itemID.replace(itemname + "&", "");

			setCookie("itemID", itemID, 1);

			chkRecent(Cpage);

		}

		function updateRecentPage(totcount, Cpage) { //  
			$("#recentCnt").text(totcount); //
			$("#totalPageCount").text(
					"/" + Math.ceil((totcount / pagingSize) * 1));

			if (Math.ceil((totcount / pagingSize) * 1) < Cpage) {

				$("#currentPage").text(Math.ceil((totcount / pagingSize) * 1));

			} else {

				$("#currentPage").text(Cpage); //

			}

		}

		$(".btn_next").on('click', function() {
			chkRecent(Cpage + 1);
		});

		$(".btn_prev").on('click', function() {
			chkRecent(Cpage - 1);
		});

		function checkCookie() {

			var itemID = getCookie("itemID");

			var thisItem = '<?=$bookID?>:<?=$itemImage ?>'; // 제품 아이디와 이미지 이름을 저장  2차원 배열처럼 쓸려고 짱구를 굴림...  json 형태로 저장도 가능할텐데.... 그건 취향대로 

			if (thisItem) {

				if (itemID != "" && itemID != null) {

					if (itemID.indexOf(thisItem) == -1) { //값이 없으면 

						setCookie("itemID", thisItem + "&" + itemID, 1);

					}

				} else {

					if (itemID == "" || itemID == null) {

						setCookie("itemID", thisItem + "&", 1);

					}

				}

			}

		}

		checkCookie();
	</script>






</body>
</html>